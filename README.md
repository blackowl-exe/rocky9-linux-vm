# Rocky Linux 9 VM Setup

## Description
This project automates the provisioning of a Rocky Linux 9 virtual machine using KVM, Libvirt, and Kickstart.

The setup consists of two main files:
* rocky.sh: A Bash script that checks for resources and executes the virtualization command.
* rocky9.ks: A Kickstart file that handles the unattended installation, creates the user 'zigzag', and applies security hardening by disabling root login and password authentication.

## Dependencies

### Fedora

1 - Run the following command to install the mandatory and default packages in the virtualization group:
```bash
sudo dnf install @virtualization
```
Alternatively, to install the mandatory, default, and optional packages, run:
```bash
sudo dnf group install --with-optional virtualization
```
2 - After the packages install, start the `libvirtd` service:
```bash
sudo systemctl start libvirtd
```
To start the service on boot, run:
```bash
sudo systemctl enable libvirtd
```
3 - To verify that the KVM kernel modules are properly loaded:
```bash
lsmod | grep kvm
kvm_amd               114688  0
kvm                   831488  1 kvm_amd
```

## Resources

To deeply understand the technologies used in this project, refer to these official resources:

### KVM & Virtualization
* [Red Hat: Configuring and Managing Virtualization](https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_managing_virtualization/index) - The comprehensive guide for KVM on RHEL-based systems.
* [Libvirt Domain XML Format](https://libvirt.org/formatdomain.html) - Understanding the XML configuration generated by `virt-install`.

### Kickstart Automation
* [RHEL 9 Kickstart Reference](https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/automatically_installing_rhel/kickstart-commands-and-options-reference_rhel-installer) - Complete syntax guide for the `.ks` file.
* [Fedora Kickstart Guide](https://docs.fedoraproject.org/en-US/fedora/latest/install-guide/appendixes/Kickstart_Syntax_Reference/) - Additional context on Kickstart usage.

### Security
* [OpenSCAP Security Guide](https://www.open-scap.org/security-policies/choosing-policy/) - Learn how to automate security compliance (useful for extending the `%post` section).
